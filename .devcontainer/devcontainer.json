{
  "name": "Tailnet Podman Environment",
  "build": {
    "dockerfile": "../Dockerfile",
    "context": ".."
  },
  "features": {
    "ghcr.io/tailscale/codespace/tailscale": {
      "version": "latest"
    },
    "ghcr.io/devcontainers-extra/features/podman-homebrew:1": {}
  },
  "containerEnv": {
    "ENGINE": "Podman",
    "SUPPORT": "https://github.com/mayas-alas/tailnet"
  },
  "runArgs": [
    "--device=/dev/net/tun",
    "--privileged"
  ],
  "forwardPorts": [
    8006
  ],
  "portsAttributes": {
    "8006": {
      "label": "Web",
      "onAutoForward": "notify"
    }
  },
  "postCreateCommand": "sudo tailscale up --advertise-exit-node --ssh --hostname=tailnet-dev"
}
